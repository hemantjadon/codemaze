function getCookie(e){var t=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var i=jQuery.trim(n[a]);if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}var QuestionBox=React.createClass({displayName:"QuestionBox",getInitialState:function(){return{question:{}}},fetchQuestion:function(){var e=window.location.origin+this.props.url;console.log(e),$.ajax({url:e,dataType:"json",cache:!1,success:function(e){this.setState({question:e}),Prism.highlightAll(),Materialize.updateTextFields()}.bind(this),error:function(e,t,n){console.log(e)}.bind(this)})},answer:function(){var e=function(e){var t=window.location.origin+e.attr("action"),n=e.children("input[type=hidden].id").val(),a=e.children(".input-field").children("input[type=text]#answer").val(),i=e.children("input[type=hidden].csrf").val();$.post({url:t,data:{id:n,ans:a},headers:{"X-CSRF-Token":i},dataType:"json",success:function(e){if("success"===e.status)QuestionBox.fetchQuestion();else if("fail"===e.status){var t=$("#content .card .card-action .input-field input#answer");$("#content .card .card-action .input-field label[for=answer]");t.addClass("invalid"),t.removeClass("valid")}},error:function(e,t,n){console.log(e)}.bind(this)})},t=function(){$("#content button.submit-button").click(function(t){t.preventDefault();var n=$(this).parent();e(n)})};t()},componentDidMount:function(){this.fetchQuestion(),this.answer()},render:function(){return React.createElement(Question,{question:this.state.question})}}),Question=React.createClass({displayName:"Question",render:function(){var e=this.props.question,t=function(){if(void 0!==e.content){var t=marked(e.content);return{__html:t}}};return React.createElement("div",{className:"outerBox"},React.createElement("div",{className:"card grey lighten-5"},React.createElement("div",{className:"card-content"},React.createElement("span",{className:"card-title"},React.createElement("h4",null,this.props.question.title)),React.createElement("div",{dangerouslySetInnerHTML:t(),className:"markedBox"})),React.createElement("div",{className:"card-action"},React.createElement(Answer,{qid:this.props.question.id}))))}}),Answer=React.createClass({displayName:"Answer",render:function(){var e=getCookie("csrftoken");return React.createElement("div",{className:"row"},React.createElement("form",{method:"post",action:"/questions/submit/"},React.createElement("input",{type:"hidden",className:"id",value:this.props.qid}),React.createElement("input",{type:"hidden",className:"csrf",value:e}),React.createElement("div",{className:"input-field"},React.createElement("input",{id:"answer",type:"text",className:"validate"}),React.createElement("label",{"data-success":"right","data-error":"Oops, this is not correct !!",htmlFor:"answer"},"Answer")),React.createElement("button",{className:"submit-button btn-floating btn-large waves-effect waves-light",type:"submit"},React.createElement("i",{className:"fa fa-chevron-right"}))))}});ReactDOM.render(React.createElement(QuestionBox,{url:"/questions/get/"}),document.getElementById("content")),marked.setOptions({langPrefix:"language-",gfm:!0,breaks:!0,sanitize:!0});